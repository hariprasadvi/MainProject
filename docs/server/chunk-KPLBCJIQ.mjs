import './polyfills.server.mjs';
import{a as A,b as E}from"./chunk-FR5UYPON.mjs";import{a as L}from"./chunk-K5BFJRX7.mjs";import{a as v,b as S,c as k,e as w,f as y}from"./chunk-5MOQ5WJV.mjs";import{Ab as l,Eb as M,Gb as b,Hb as s,Id as h,Jd as O,Nc as P,Rb as i,Ta as c,Tb as m,W as p,ca as f,da as u,db as C,hb as x,sb as _,vb as d,yb as a,zb as o}from"./chunk-PI4TSKQL.mjs";import{g}from"./chunk-X2SEQXRR.mjs";function D(n,e){n&1&&(a(0,"div",1)(1,"div",5),l(2,"div",6),a(3,"p"),i(4,"Scanning Face..."),o(),l(5,"mat-progress-spinner",7),o(),a(6,"div",8)(7,"p"),i(8,"Getting location..."),o()()())}function V(n,e){if(n&1){let t=M();a(0,"div",2)(1,"button",9),b("click",function(){f(t);let T=s();return u(T.markAttendance())}),i(2," Mark Attendance "),o()()}}function F(n,e){if(n&1&&(a(0,"div",10),i(1),o()),n&2){let t=s();_("success",t.attendanceStatus.includes("successfully"))("error",t.attendanceStatus.includes("Error")),c(),m(" ",t.attendanceStatus," ")}}function I(n,e){if(n&1&&(a(0,"div",4)(1,"h4"),i(2,"Location Details:"),o(),a(3,"p"),i(4),o(),a(5,"p"),i(6),o()()),n&2){let t=s();c(4),m("Latitude: ",t.currentLocation.latitude,""),c(2),m("Longitude: ",t.currentLocation.longitude,"")}}var z=class n{apiService=p(L);currentLocation=null;isScanning=!1;attendanceStatus="";markAttendance(){return g(this,null,function*(){try{if(this.isScanning=!0,this.attendanceStatus="",this.currentLocation=yield this.getCurrentLocation(),(yield this.scanFace())&&this.currentLocation){let t={location:this.currentLocation,timestamp:new Date,faceVerified:!0};this.apiService.markAttendance(t).subscribe({next:()=>{this.attendanceStatus="Attendance marked successfully!",this.isScanning=!1},error:()=>{this.attendanceStatus="Error marking attendance",this.isScanning=!1}})}}catch(e){this.attendanceStatus=`Error: ${e}`,this.isScanning=!1}})}getCurrentLocation(){return new Promise((e,t)=>{if(!navigator.geolocation){t("Geolocation not supported");return}navigator.geolocation.getCurrentPosition(r=>e({latitude:r.coords.latitude,longitude:r.coords.longitude}),r=>t(r))})}scanFace(){return new Promise(e=>{setTimeout(()=>e(!0),2e3)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["app-attendance"]],decls:12,vars:3,consts:[[1,"attendance-container"],[1,"scanning-area"],[1,"attendance-controls"],[1,"status-message",3,"success","error"],[1,"location-display"],[1,"face-scanner"],[1,"scanner-animation"],["mode","indeterminate","diameter","40"],[1,"location-info"],["mat-raised-button","","color","primary",1,"mark-attendance-btn",3,"click"],[1,"status-message"]],template:function(t,r){t&1&&(a(0,"div",0)(1,"h2"),i(2,"Attendance System"),o(),a(3,"mat-card")(4,"mat-card-header")(5,"mat-card-title"),i(6,"Mark Your Attendance"),o()(),a(7,"mat-card-content"),x(8,D,9,0,"div",1)(9,V,3,0,"div",2)(10,F,2,5,"div",3)(11,I,7,2,"div",4),o()()()),t&2&&(c(8),d(r.isScanning?8:9),c(2),d(r.attendanceStatus?10:-1),c(),d(r.currentLocation?11:-1))},dependencies:[P,y,v,k,w,S,O,h,E,A],styles:['@charset "UTF-8";.attendance-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;animation:fadeIn .6s ease-in}.attendance-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#fff;margin-bottom:2rem;font-size:2.5rem;font-weight:300;text-shadow:2px 2px 4px rgba(0,0,0,.3)}mat-card[_ngcontent-%COMP%]{border-radius:20px!important;box-shadow:0 20px 40px #0000001a!important;border:1px solid rgba(255,255,255,.1);backdrop-filter:blur(10px);background:#fffffff2!important;overflow:hidden}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2c5530,#4a7c59);color:#fff;padding:1.5rem 2rem}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;display:flex;align-items:center}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]:before{content:"\\1f464";margin-right:12px;font-size:1.8rem}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:2rem!important}.scanning-area[_ngcontent-%COMP%]{text-align:center;padding:2rem}.scanning-area[_ngcontent-%COMP%]   .face-scanner[_ngcontent-%COMP%]{margin-bottom:2rem}.scanning-area[_ngcontent-%COMP%]   .face-scanner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#2c5530;margin:1rem 0;font-weight:500}.scanning-area[_ngcontent-%COMP%]   .face-scanner[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin:1rem auto}.scanner-animation[_ngcontent-%COMP%]{width:250px;height:250px;border:3px solid #2c5530;border-radius:50%;position:relative;overflow:hidden;margin:0 auto 2rem;background:conic-gradient(from 0deg,#8fb996,#4a7c59,#2c5530,#8fb996);animation:rotate 3s linear infinite}.scanner-animation[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:10px;background:#fff;border-radius:50%;z-index:1}.scanner-animation[_ngcontent-%COMP%]:after{content:"\\1f441\\fe0f";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:3rem;z-index:2}.attendance-controls[_ngcontent-%COMP%]{text-align:center;padding:2rem}.attendance-controls[_ngcontent-%COMP%]   .mark-attendance-btn[_ngcontent-%COMP%]{padding:16px 40px;font-size:1.1rem;border-radius:50px;background:linear-gradient(135deg,#2c5530,#4a7c59);color:#fff;border:none;cursor:pointer;transition:all .3s ease;box-shadow:0 8px 25px #2c55304d;position:relative;overflow:hidden}.attendance-controls[_ngcontent-%COMP%]   .mark-attendance-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);transition:left .5s}.attendance-controls[_ngcontent-%COMP%]   .mark-attendance-btn[_ngcontent-%COMP%]:hover:before{left:100%}.attendance-controls[_ngcontent-%COMP%]   .mark-attendance-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 12px 35px #2c553066}.attendance-controls[_ngcontent-%COMP%]   .mark-attendance-btn[_ngcontent-%COMP%]:active{transform:translateY(-1px)}.status-message[_ngcontent-%COMP%]{text-align:center;margin:2rem 0;padding:1rem 2rem;border-radius:15px;font-weight:600;font-size:1.1rem;box-shadow:0 5px 15px #0000001a}.status-message.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4edda,#c3e6cb);color:#28a745;border:2px solid #c3e6cb}.status-message.error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8d7da,#f5c6cb);color:#dc3545;border:2px solid #f5c6cb}.location-display[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);padding:1.5rem;border-radius:15px;margin-top:2rem;border-left:5px solid #2c5530}.location-display[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:#2c5530;font-size:1.2rem;display:flex;align-items:center}.location-display[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:before{content:"\\1f4cd";margin-right:8px}.location-display[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-family:Courier New,monospace;font-size:1rem;color:#1a1a1a;background:#fff;padding:8px 12px;border-radius:8px;border:1px solid #e9ecef}']})};export{z as AttendanceComponent};
